{% extends 'blog/base.html' %}

{% block title %}
    Create New Case Study
{% endblock %}

{% block content %}
<div class="jumbotron container row">

    <!--Page Navigation-->
    <h5> <a href="{% url 'course_detail' title=course.title %}"> Space: {{course.title}} </a> > Case Page </h5>
    <br>

    <p class="post-title">Title of the case study: {{case.title}}</p>
    <br>
    <hr>
    <p class="post-text">Description: {{case.description}}</p>

    <hr>
   {% if user in course.enrolled_users.all %}
       ** if the user submitted his/her work, do not show submit button
        You have submitted your answer for this case.
        <hr>
        <p class="post-author"> Upload Your Work:</p>
        <form method="POST" class="post-form" enctype="multipart/form-data">  
            {% csrf_token %}  

            {{form.as_p}}
            <button type="submit" class="save btn btn-success">Submit</button>  
            <hr>
        </form>
    {% endif %}
    Submitted answers
    {% for list_form in list_formset %}
    <tr id="row_{{ list_form.instance.id }}">
      <th scope="row">{{forloop.counter}}</th>
      
      <td> 
        <a href="{% url 'other_user_profile' name=list_form.instance.user.username %}" class="post-author" style="font-family:'Poppins';font-size:18px; font-weight: 600px; margin-right:5px">
          {{list_form.instance.user}}
        </a>
      </td>
      
      <td>{{ list_form.instance.shared_date }}</td>
      
      <td><a href="{{ MEDIA_URL }}{{list_form.instance.upload.url}}">Download</a></td>
      
      <td>{{list_form.instance.score}}/100</td>
    </tr>
    {% endfor %}
</div>

{% endblock %}